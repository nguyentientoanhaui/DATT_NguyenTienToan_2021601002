@model SellRequestModel
@{
    ViewData["Title"] = "Thu mua ƒë·ªìng h·ªì";
    Layout = null;
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thu mua ƒë·ªìng h·ªì - Aurum</title>
    <link href="~/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="~/css/sweetalert2.min.css" rel="stylesheet">
    <link href="~/css/main.css" rel="stylesheet">
</head>
<body>
    <style>
    .sell-container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .sell-header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #f0f0f0;
    }

    .sell-header h1 {
        font-size: 2rem;
        font-weight: 700;
        color: #000;
        margin-bottom: 0.5rem;
    }

    .sell-header p {
        color: #666;
        font-size: 1rem;
    }

    .product-info {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border-left: 4px solid #000;
    }

    .product-info h3 {
        color: #000;
        font-weight: 600;
        margin-bottom: 1rem;
    }

    .product-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .product-detail {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .product-detail i {
        color: #000;
        width: 20px;
    }

    .product-detail span {
        color: #666;
        font-size: 0.9rem;
    }

    .form-section {
        margin-bottom: 2rem;
    }

    .form-section h3 {
        color: #000;
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }

    .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .form-group {
        margin-bottom: 1rem;
    }

    .form-label {
        display: block;
        font-weight: 600;
        color: #000;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .form-input, .form-select, .form-textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        background: white;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
        outline: none;
        border-color: #000;
        box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    }

    .form-textarea {
        resize: vertical;
        min-height: 100px;
    }

    .price-suggestion {
        background: #f8f9fa;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        padding: 1rem;
        margin-bottom: 1rem;
    }

    .price-suggestion h4 {
        color: #000;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .price-suggestion p {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .suggested-price {
        font-size: 1.2rem;
        font-weight: 700;
        color: #000;
    }

    .btn-submit {
        width: 100%;
        padding: 1rem 2rem;
        background: #000;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-submit:hover {
        background: #333;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .btn-submit:disabled {
        background: #ccc;
        cursor: not-allowed;
        transform: none;
    }

    .validation-error {
        color: #dc3545;
        font-size: 0.8rem;
        margin-top: 0.25rem;
        display: block;
    }

    .file-upload {
        position: relative;
        display: inline-block;
        width: 100%;
    }

    .file-upload input[type=file] {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
    }

    .file-upload-label {
        display: block;
        padding: 0.75rem 1rem;
        border: 2px dashed #e0e0e0;
        border-radius: 6px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
    }

    .file-upload-label:hover {
        border-color: #000;
        background: #f8f9fa;
    }

    .file-upload-label i {
        margin-right: 0.5rem;
        color: #666;
    }

    @@media (max-width: 768px) {
        .sell-container {
            margin: 1rem;
            padding: 1rem;
        }

        .form-row {
            grid-template-columns: 1fr;
        }

        .product-details {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="sell-container">
    <div class="sell-header">
        <h1>Thu mua ƒë·ªìng h·ªì</h1>
        <p>Ch√∫ng t√¥i s·∫Ω ƒë√°nh gi√° v√† ƒë∆∞a ra m·ª©c gi√° ph√π h·ª£p cho ƒë·ªìng h·ªì c·ªßa b·∫°n</p>
    </div>

    <div class="product-info">
        <h3>Th√¥ng tin s·∫£n ph·∫©m tham kh·∫£o</h3>
        <div class="product-details">
            <div class="product-detail">
                <i class="fas fa-tag"></i>
                <span><strong>T√™n:</strong> @ViewBag.Product.Name</span>
            </div>
            <div class="product-detail">
                <i class="fas fa-crown"></i>
                <span><strong>Th∆∞∆°ng hi·ªáu:</strong> @ViewBag.Product.Brand?.Name</span>
            </div>
            <div class="product-detail">
                <i class="fas fa-list"></i>
                <span><strong>Danh m·ª•c:</strong> @ViewBag.Product.Category?.Name</span>
            </div>
            <div class="product-detail">
                <i class="fas fa-dollar-sign"></i>
                <span><strong>Gi√° b√°n:</strong> @ViewBag.Product.Price.ToString("N0") VNƒê</span>
            </div>
        </div>
    </div>

    <form asp-action="Create" method="post" enctype="multipart/form-data">
        <input type="hidden" asp-for="ProductId" value="@ViewBag.ProductId" />

        <div class="form-section">
            <h3>Th√¥ng tin li√™n h·ªá</h3>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" asp-for="FullName">H·ªç v√† t√™n *</label>
                    <input asp-for="FullName" class="form-input" placeholder="Nh·∫≠p h·ªç v√† t√™n c·ªßa b·∫°n" />
                    <span asp-validation-for="FullName" class="validation-error"></span>
                </div>
                <div class="form-group">
                    <label class="form-label" asp-for="PhoneNumber">S·ªë ƒëi·ªán tho·∫°i *</label>
                    <input asp-for="PhoneNumber" class="form-input" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" />
                    <span asp-validation-for="PhoneNumber" class="validation-error"></span>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label" asp-for="Email">Email *</label>
                <input asp-for="Email" class="form-input" placeholder="Nh·∫≠p email c·ªßa b·∫°n" />
                <span asp-validation-for="Email" class="validation-error"></span>
            </div>
        </div>

        <div class="form-section">
            <h3>Th√¥ng tin ƒë·ªìng h·ªì</h3>
            <div class="form-group">
                <label class="form-label" asp-for="WatchInfo">M√¥ t·∫£ ƒë·ªìng h·ªì *</label>
                <textarea asp-for="WatchInfo" class="form-textarea" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ ƒë·ªìng h·ªì c·ªßa b·∫°n (model, t√¨nh tr·∫°ng, ph·ª• ki·ªán ƒëi k√®m...)" rows="4"></textarea>
                <span asp-validation-for="WatchInfo" class="validation-error"></span>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" asp-for="Condition">T√¨nh tr·∫°ng</label>
                    <select asp-for="Condition" class="form-select">
                        <option value="">Ch·ªçn t√¨nh tr·∫°ng</option>
                        <option value="M·ªõi">M·ªõi</option>
                        <option value="Nh∆∞ m·ªõi">Nh∆∞ m·ªõi</option>
                        <option value="T·ªët">T·ªët</option>
                        <option value="Kh√°">Kh√°</option>
                        <option value="Trung b√¨nh">Trung b√¨nh</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" asp-for="Year">NƒÉm s·∫£n xu·∫•t</label>
                    <input asp-for="Year" type="number" class="form-input" placeholder="VD: 2020" min="1900" max="@DateTime.Now.Year" />
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" asp-for="ExpectedPrice">Gi√° mong mu·ªën (VNƒê)</label>
                <input asp-for="ExpectedPrice" type="number" class="form-input" placeholder="Nh·∫≠p gi√° mong mu·ªën" min="0" />
                <span asp-validation-for="ExpectedPrice" class="validation-error"></span>
            </div>

            <div class="price-suggestion">
                <h4>üí° G·ª£i √Ω gi√°</h4>
                <p>D·ª±a tr√™n s·∫£n ph·∫©m tham kh·∫£o, ch√∫ng t√¥i ƒë·ªÅ xu·∫•t m·ª©c gi√°:</p>
                <div class="suggested-price" id="suggestedPrice">ƒêang t√≠nh...</div>
            </div>
        </div>

        <div class="form-section">
            <h3>H√¨nh ·∫£nh ƒë·ªìng h·ªì</h3>
            <div class="form-group">
                <label class="form-label">H√¨nh ·∫£nh ƒë·ªìng h·ªì</label>
                <div class="file-upload">
                    <input type="file" name="watchImage" accept="image/*" />
                    <label class="file-upload-label">
                        <i class="fas fa-cloud-upload-alt"></i>
                        Ch·ªçn h√¨nh ·∫£nh ƒë·ªìng h·ªì (t√πy ch·ªçn)
                    </label>
                </div>
            </div>
        </div>

        <div class="form-section">
            <h3>Ghi ch√∫ th√™m</h3>
            <div class="form-group">
                <textarea asp-for="Notes" class="form-textarea" placeholder="Th√¥ng tin b·ªï sung v·ªÅ ƒë·ªìng h·ªì ho·∫∑c y√™u c·∫ßu ƒë·∫∑c bi·ªát..." rows="3"></textarea>
            </div>
        </div>

        <button type="submit" class="btn-submit" id="submitBtn">
            <i class="fas fa-paper-plane"></i> G·ª≠i y√™u c·∫ßu thu mua
        </button>
    </form>
</div>

    <script src="~/js/jquery.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/sweetalert2.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Load suggested price
            loadSuggestedPrice();
            
            // File upload preview
            $('input[type=file]').change(function() {
                var fileName = $(this).val().split('\\').pop();
                if (fileName) {
                    $(this).siblings('.file-upload-label').html('<i class="fas fa-check"></i> ' + fileName);
                }
            });
            
            // Form submission
            $('form').submit(function() {
                $('#submitBtn').prop('disabled', true).html('<i class="fas fa-spinner fa-spin"></i> ƒêang g·ª≠i...');
            });
        });
        
        function loadSuggestedPrice() {
            var productId = @ViewBag.ProductId;
            $.get('/Sell/GetQuote', { productId: productId })
                .done(function(response) {
                    if (response.success) {
                        var suggestedPrice = response.product.suggestedPrice.toLocaleString('vi-VN');
                        $('#suggestedPrice').text(suggestedPrice + ' VNƒê');
                    }
                })
                .fail(function() {
                    $('#suggestedPrice').text('Kh√¥ng th·ªÉ t√≠nh to√°n');
                });
        }
    </script>
</body>
</html>
