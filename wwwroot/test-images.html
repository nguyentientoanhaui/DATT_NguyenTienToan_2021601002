<!DOCTYPE html>
<html>
<head>
    <title>Test Product Images</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        
        .product-image {
            width: 100%;
            height: 250px;
            overflow: hidden;
            position: relative;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.3s ease;
            max-width: 100%;
            max-height: 100%;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-name {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        .product-price {
            color: #ff6200;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .test-url {
            font-size: 0.8em;
            color: #666;
            word-break: break-all;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Test Product Images</h1>
    
    <div class="test-section">
        <h2>Test 1: Direct Image URLs from Database</h2>
        <div class="product-grid" id="direct-images">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
    
    <div class="test-section">
        <h2>Test 2: GetProductImage Action URLs</h2>
        <div class="product-grid" id="action-images">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
    
    <div class="test-section">
        <h2>Test 3: Placeholder Images</h2>
        <div class="product-grid">
            <div class="product-item">
                <div class="product-image">
                    <img src="/images/placeholder-product.svg" alt="Placeholder 1" />
                </div>
                <div class="product-info">
                    <div class="product-name">Placeholder Image 1</div>
                    <div class="product-price">$0</div>
                </div>
            </div>
            <div class="product-item">
                <div class="product-image">
                    <img src="/images/placeholder-product.svg" alt="Placeholder 2" />
                </div>
                <div class="product-info">
                    <div class="product-name">Placeholder Image 2</div>
                    <div class="product-price">$0</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Test data - replace with actual product IDs from your database
        const testProducts = [
            { id: 1, name: "Test Product 1", price: "$1,000" },
            { id: 2, name: "Test Product 2", price: "$2,000" },
            { id: 3, name: "Test Product 3", price: "$3,000" },
            { id: 4, name: "Test Product 4", price: "$4,000" }
        ];
        
        // Sample direct URLs from database
        const directUrls = [
            "https://images.bobswatches.com/cartier/images/Used-Cartier-Must-de-Cartier-Tridor-Dial-SKU172988.jpg",
            "https://images.bobswatches.com/rolex/images/Used-Rolex-Oyster-Perpetual-36mm-SKU123456.jpg",
            "https://images.bobswatches.com/omega/images/Used-Omega-Speedmaster-SKU789012.jpg",
            "https://images.bobswatches.com/breitling/images/Used-Breitling-Navitimer-SKU345678.jpg"
        ];
        
        function createProductCard(product, imageUrl, containerId) {
            const container = document.getElementById(containerId);
            const productDiv = document.createElement('div');
            productDiv.className = 'product-item';
            
            productDiv.innerHTML = `
                <div class="product-image">
                    <img src="${imageUrl}" 
                         alt="${product.name}" 
                         onerror="this.src='/images/placeholder-product.svg'; this.onerror=null;" />
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">${product.price}</div>
                    <div class="test-url">${imageUrl}</div>
                </div>
            `;
            
            container.appendChild(productDiv);
        }
        
        // Populate direct images
        testProducts.forEach((product, index) => {
            const imageUrl = directUrls[index] || directUrls[0];
            createProductCard(product, imageUrl, 'direct-images');
        });
        
        // Populate action images
        testProducts.forEach((product) => {
            const imageUrl = `/Home/GetProductImage?productId=${product.id}`;
            createProductCard(product, imageUrl, 'action-images');
        });
        
        // Add event listeners for image loading
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('img');
            
            images.forEach((img, index) => {
                img.addEventListener('load', function() {
                    console.log(`Image ${index + 1} loaded successfully:`, this.src);
                    this.style.border = '2px solid green';
                });
                
                img.addEventListener('error', function() {
                    console.log(`Image ${index + 1} failed to load:`, this.src);
                    this.style.border = '2px solid red';
                });
            });
        });
    </script>
</body>
</html>
